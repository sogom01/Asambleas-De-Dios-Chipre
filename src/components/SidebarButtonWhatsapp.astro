---
import "../styles/sidebar-buttons.css"; // Si necesitas estilos específicos
---

<div class="relative group">
  <a
    id="whatsapp-button"
    href="https://wa.me/3126691924?text=Hola,%20quisiera%20saber%20más%20acerca%20de%20la%20iglesia"
    target="_blank"
    rel="noopener noreferrer"
    class="sidebar-button flex items-center p-3 rounded-l-full shadow-lg transition-all duration-300 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 text-white"
    aria-label="WhatsApp"
  >
    <i class="fab fa-whatsapp text-2xl"></i>
    <span
      class="ml-2 opacity-0 group-hover:opacity-100 transition duration-300 whitespace-nowrap"
    >
      WhatsApp
    </span>
  </a>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const whatsappButton = document.getElementById("whatsapp-button");

    function resetButton() {
      whatsappButton.classList.remove("expanded");
    }

    whatsappButton.addEventListener("click", function () {
      setTimeout(() => {
        whatsappButton.style.pointerEvents = "none";
        setTimeout(() => {
          whatsappButton.style.pointerEvents = "auto";
          resetButton();
        }, 300);
      }, 100);
    });

    whatsappButton.addEventListener("mouseover", function () {
      whatsappButton.classList.add("expanded");
    });

    whatsappButton.addEventListener("mouseout", function () {
      if (!whatsappButton.matches(":hover")) {
        resetButton();
      }
    });

    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState === "visible") {
        resetButton();
      }
    });
  });
</script>
